!function(){"use strict";function e(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class t{constructor(){let{container:t=null,body:i=null,trigger:s=null,animation:n=null,focusLock:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,"_isOpen",!1),e(this,"_blockScrollWasAdded",!1),this._container=document.querySelector(t),this._trigger=s?document.querySelector(s):null,this._body=i,this._animation=n,this._focusLock=o}isOpen(){return this._isOpen}init(){this._throwsError(),this._addsEventListenersTrigger(),this._closesWindowOnClickOutside(),this._setsStyleHiding()}_throwsError(){if(!this._body)throw new Error("Field body is required")}_addsEventListenersTrigger(){this._trigger&&(this._trigger.addEventListener("pointerup",(()=>{this.toggle()})),this._trigger.addEventListener("keydown",(e=>{"Enter"===e.code&&this.toggle()})))}toggle(){this.isOpen()?this.close():this.open()}close(){this._isOpen=!1,this._setsStyleHiding(),this._switchesClassActiveTrigger(),this._changesClassActiviteAtWindow(),this._unblocksFocus(),this._removesScrollPadding(document.body),this._removesScrollPadding(this._container),this._switchesBlockScroll()}_setsStyleHiding(){this._animation?this._animation.setStyleHiding(this._container):(this._container.style.visibility="hidden",this._container.style.opacity=0)}_switchesClassActiveTrigger(){this._trigger&&(this._isOpen?this._trigger.classList.add("active"):this._trigger.classList.remove("active"))}_changesClassActiviteAtWindow(){this._isOpen?this._container.classList.add("active"):this._container.classList.remove("active")}_unblocksFocus(){this._focusLock&&this._focusLock.unblocksFocus()}_switchesBlockScroll(){const{body:e}=document;if(this.isOpen()){if(e.classList.contains("overflow-hidden"))return;return e.classList.add("overflow-hidden"),void(this._blockScrollWasAdded=!0)}this._blockScrollWasAdded&&(e.classList.remove("overflow-hidden"),this._blockScrollWasAdded=!1)}_removesScrollPadding(e){e.style.paddingRight=0}open(){this._isOpen=!0,this._addsPaddingInsteadOfScroll(document.body),this._addsPaddingInsteadOfScroll(this._container),this._setsStyleVisibility(),this._switchesBlockScroll(),this._switchesClassActiveTrigger(),this._changesClassActiviteAtWindow(),this._blocksFocus()}_addsPaddingInsteadOfScroll(e){const t=window.innerWidth-document.body.offsetWidth+"px";e.style.paddingRight=t}_setsStyleVisibility(){this._animation?this._animation.setStyleVisibility(this._container):(this._container.style.visibility="visible",this._container.style.opacity=1)}_blocksFocus(){this._focusLock&&this._focusLock.blocksFocus()}_closesWindowOnClickOutside(){this._container.addEventListener("pointerdown",(e=>{e.target.closest(this._body)||this.close()}))}}class i extends t{constructor(){let{container:e=null,body:t=null,trigger:i=null,animation:s=null,focusLock:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var o,r;super({container:e,body:t,trigger:i,animation:s,focusLock:n}),r=void 0,(o="_activeElementBeforeOpen")in this?Object.defineProperty(this,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[o]=r,this._closeBtn=this._container.querySelector(".modal__close")}init(){super.init(),this._addsEventListenersButtonClose()}_addsEventListenersButtonClose(){this._closeBtn.addEventListener("pointerup",(()=>{this.close()})),this._closeBtn.addEventListener("keyup",(e=>{"Enter"===e.code&&this.close()}))}open(){super.open(),this._activeElementBeforeOpen=document.activeElement}close(){var e;super.close(),null===(e=this._activeElementBeforeOpen)||void 0===e||e.focus(),this._activeElementBeforeOpen=null}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class n{constructor(){let{exception:e=!1,container:t="body",mutationObserver:i=!1,disableOnMobileDevice:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,"_listElementsToBlock",new Set),s(this,"_listChecksToBlock",[this._checkingForFocus,this._checkingForException.bind(this)]),s(this,"_isBlockFocus",!1),s(this,"_linkOnMutationObserver",void 0),s(this,"_listHandlesMutationObserver",{childList:this._handlesMutationChildList,attributes:this._handlesMutationAttributes}),s(this,"_mutationAttributesFlag",!1),this._exception=e,this._container=t,this._mutationObserver=i,this._disableOnMobileDevice=n}isBlockFocus(){return this._isBlockFocus}init(){this._disableOnMobileDevice&&this._userDeviceIsPhone()||(this._throwsErrors(),setTimeout((()=>{this._populatesTheListElementsToBlock(document.querySelectorAll(`${this._container} *`))}),0),this._addsMutationObserver())}_userDeviceIsPhone(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)}_throwsErrors(){if(this._exception&&!Array.isArray(this._exception)&&"string"!=typeof this._exception)throw new Error("Exception wrong type");if(this._container&&"string"!=typeof this._container)throw new Error("Container wrong type")}_populatesTheListElementsToBlock(e){e.forEach((e=>{this._checksOneElement(e)&&this._addsElementToBlockList(e)}))}_addsElementToBlockList(e){this._listElementsToBlock.add(e),this.isBlockFocus()&&this._blocksFocusElement(e)}_checksOneElement(e){return this._listChecksToBlock.every((t=>t(e)))}_checkingForFocus(e){return 0===e.tabIndex}_checkingForException(e){if(!this._exception)return!0;if(!Array.isArray(this._exception))return!e.closest(this._exception);for(const t of this._exception)if(e.closest(t))return!1;return!0}_blocksFocusElement(e){null==e||e.setAttribute("tabindex",-1)}blocksFocus(){this._disableOnMobileDevice&&this._userDeviceIsPhone()||(this._listElementsToBlock.forEach((e=>{this._blocksFocusElement(e)})),this._isBlockFocus=!0,this._mutationAttributesFlag=!0)}unblocksFocus(){this._disableOnMobileDevice&&this._userDeviceIsPhone()||(this._listElementsToBlock.forEach((e=>{this._unblocksFocusElement(e)})),this._isBlockFocus=!1,setTimeout((()=>{this._mutationAttributesFlag=!1})))}_unblocksFocusElement(e){null==e||e.setAttribute("tabindex",0)}_addsMutationObserver(){this._mutationObserver&&(this._linkOnMutationObserver=new MutationObserver(this._handlesMutationObserver.bind(this)),this._linkOnMutationObserver.observe(document.querySelector(this._container),{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["tabindex"]}))}_handlesMutationObserver(e){e.forEach((e=>{const{type:t}=e;this._listHandlesMutationObserver[t].call(this,e)}))}_handlesMutationChildList(e){const{addedNodes:t,removedNodes:i}=e,s=this._filtersElementsFromNodes(t),n=this._filtersElementsFromNodes(i);this._populatesTheListElementsToBlock(s),this._removesElementsFromBlockList(n)}_filtersElementsFromNodes(e){return Array.from(e).filter((e=>1===e.nodeType))}_removesElementsFromBlockList(e){e.forEach((e=>this._removesElementFromBlockList(e)))}_removesElementFromBlockList(e){this._listElementsToBlock.delete(e),this.isBlockFocus()&&this._unblocksFocusElement(e)}_handlesMutationAttributes(e){if(this._mutationAttributesFlag)return;const{target:t}=e;this._checksOneElement(t)?this._addsElementToBlockList(t):this._removesElementFromBlockList(t)}disconnectsMutationObserver(){this._linkOnMutationObserver.disconnect()}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r{constructor(e){let{animation:t=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,"_isOpen",!1),o(this,"_chosenElement",null),o(this,"_idxSelectItemInFocus",0),this._select=document.querySelector(e),this._trigger=this._select.querySelector(".select__trigger"),this._containerForChosenElement=this._select.querySelector(".select__chosen"),this._body=this._select.querySelector(".select__body"),this._content=this._select.querySelector(".select__content"),this._selectItems=this._select.querySelectorAll(".select__item"),this._animation=t,this._styleBody=window.getComputedStyle(this._body),this._bodyHasTransition=0!=parseFloat(this._styleBody.transitionDuration)}getChosenElement(){return this._chosenElement}isFilled(){return Boolean(this._chosenElement)}isOpen(){return this._isOpen}init(){this._close(),this._setsEventListenersTrigger(),this._setsEventListenersElements()}_close(){this._isOpen=!1,this._setsStyleHiding(),this._removesClassActiviteAtSelect()}_setsStyleHiding(){this._animation?this._animation.setsStyleHiding(this._select):this._body.style.display="none"}_removesClassActiviteAtSelect(){this._select.classList.remove("select_active")}_setsEventListenersTrigger(){this._trigger.addEventListener("pointerup",this._toggle.bind(this)),this._trigger.addEventListener("keydown",(e=>{"Enter"===e.code&&this._toggle()}))}_toggle(){this._isOpen?this._close():this._open()}_open(){this._isOpen=!0,this._setsStyleVisibility(),this._addsClassActiviteSelect(),this._setsFocusOnIdxAfterOpen()}_setsStyleVisibility(){this._animation?this._animation.setsStyleVisibility(this._select):this._body.style.display="block"}_addsClassActiviteSelect(){this._select.classList.add("select_active")}_setsFocusOnIdxAfterOpen(){var e;this._bodyHasTransition?this._body.addEventListener("transitionend",(()=>{var e;null===(e=this._selectItems[this._idxSelectItemInFocus])||void 0===e||e.focus()}),{once:!0}):null===(e=this._selectItems[this._idxSelectItemInFocus])||void 0===e||e.focus()}_setsEventListenersElements(){this._content.addEventListener("pointerup",(e=>{const{target:t}=e;t.classList.contains("select__item")&&this._makesElementChosen(t)})),this._content.addEventListener("keydown",(e=>{const{target:t}=e;"Enter"===e.code&&t.classList.contains("select__item")&&this._makesElementChosen(t)})),this._content.addEventListener("keydown",(e=>{const{code:t}=e;"ArrowDown"===t&&(e.preventDefault(),this._navigatesDownTheSelectElements())})),this._content.addEventListener("keydown",(e=>{const{code:t}=e;"ArrowUp"===t&&(e.preventDefault(),this._navigatesUpTheSelectElements())})),this._content.addEventListener("keyup",(e=>{const{target:t,code:i}=e;"Tab"===i&&this._synchronizesIdxSelectItemInFocus(t)}))}_makesElementChosen(e){const t=this._getDataValue(e);this._checksChosenElementForMatch(t)||(this._removesClassActivityAtSelectItem(this._getSelectItemOnDataValue(this._chosenElement)),this._writesChosenElementInField(t),this._addsClassActivitySelectItem(e),this._showsChosenElement(e),this._close())}_getDataValue(e){return e.dataset.value}_checksChosenElementForMatch(e){return this._chosenElement===e}_removesClassActivityAtSelectItem(e){null==e||e.classList.remove("select__item_selected")}_getSelectItemOnDataValue(e){return e?Array.from(this._selectItems).find((t=>t.dataset.value===e)):null}_writesChosenElementInField(e){this._chosenElement=e}_addsClassActivitySelectItem(e){null==e||e.classList.add("select__item_selected")}_showsChosenElement(e){this._containerForChosenElement.textContent=e.textContent}_navigatesDownTheSelectElements(){var e;this._selectItems.length-1!==this._idxSelectItemInFocus&&(this._idxSelectItemInFocus+=1,null===(e=this._selectItems[this._idxSelectItemInFocus])||void 0===e||e.focus())}_navigatesUpTheSelectElements(){var e;0!==this._idxSelectItemInFocus&&(this._idxSelectItemInFocus-=1,null===(e=this._selectItems[this._idxSelectItemInFocus])||void 0===e||e.focus())}_synchronizesIdxSelectItemInFocus(e){this._idxSelectItemInFocus=Array.from(this._selectItems).indexOf(e)}}class l{setsStyleVisibility(e){const t=e.querySelector(".body"),i=e.querySelector(".content");t.style.cssText=`\n      overflow:  ;\n      max-height: ${i.scrollHeight}px;\n      visibility: visible;\n    `}setsStyleHiding(e){e.querySelector(".body").style.cssText="\n      overflow: hidden;\n      max-height: 0;\n      visibility: hidden;\n    "}}class c extends t{constructor(){let{container:e=null,body:t=null,trigger:i=null,breakpoints:s=null,animation:n=null,focusLock:o=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r,l;super({container:e,body:t,trigger:i,animation:n,focusLock:o}),l=void 0,(r="_currentBreakpoint")in this?Object.defineProperty(this,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):this[r]=l,this._breakpoints=s}init(){super.init(),this._initBreakpointUpdate()}_initBreakpointUpdate(){this._breakpoints&&(this._updatesBreakpoint(),window.addEventListener("resize",function(e,t){let i;return function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];clearTimeout(i),i=setTimeout((()=>{e.apply(this,s)}),400)}}(this._updatesBreakpoint.bind(this))))}_updatesBreakpoint(){const e=this._getCurrentBreakpoint();this._currentBreakpoint!=e&&(this._currentBreakpoint=e,this._callsFunctionsBreakpoint())}_getCurrentBreakpoint(){const e=window.innerWidth;return Object.keys(this._breakpoints).reduce(((t,i)=>(e>=i&&(t=i),t)),0)}_callsFunctionsBreakpoint(){const e=this._breakpoints[this._currentBreakpoint];e&&("function"!=typeof e?null==e||e.forEach((e=>{e()})):e())}}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)return;e.preventDefault();const t=e.target,i=t.closest("[href]").getAttribute("href");document.querySelector(i).scrollIntoView({behavior:"smooth",block:"start"})}function d(){const e=window.getComputedStyle(document.body);return parseFloat(e.fontSize)||16}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _{constructor(e){let{showAnimationError:t,hidingAnimationError:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,"_listElementsToValidate",new Map),h(this,"_listValidationRules",{required:this._required,maxLength:this._maxLength,minLength:this._minLength,text:this._text,phone:this._phone,email:this._email}),h(this,"_isValid",void 0),this._form=document.querySelector(e),this._showAnimationError=t,this._hidingAnimationError=i}isValid(){return this._isValid}submit(e){this._form.addEventListener("submit",(t=>{t.preventDefault(),e(t)}))}getForm(){return this._form}addCustomValidationRule(e,t){if(this._listValidationRules[e])throw new Error("This rule already exists");this._listValidationRules[e]=t}addElementForValidation(e,t){this._form.querySelectorAll(e).forEach((e=>{const i=this._definesRulesForElementValidation(e,t);this._listElementsToValidate.set(e,i)}))}_definesRulesForElementValidation(e,t){return Object.keys(t).reduce(((i,s)=>(i.push(this._configuresValidationRuleForElement(e,s,t[s])),i)),[])}_configuresValidationRuleForElement(e,t,i){if(!this._listValidationRules[t])throw new Error(`Rule ${t} does not exist`);return this._listValidationRules[t].bind(null,{element:e,...i})}validates(){const e=Array.from(this._listElementsToValidate.keys()).map((e=>{const{isValid:t,errorMessage:i}=this._checksValidityAnElement(e);return t&&(this._removesInvalidClass(e),this._removesErrorText(e)),t||(this._addsInvalidClass(e),this._insertsErrorText(e,i)),t}));this._isValid=e.every((e=>e))}_checksValidityAnElement(e){const t=this._listElementsToValidate.get(e);let i=null;const s=t.every((e=>{const t=e();return i=t.errorMessage,t.isValid}));return{errorMessage:i,isValid:s}}_addsInvalidClass(e){e.classList.add("invalid")}_removesErrorText(e){const t=e.nextElementSibling;this._hidingAnimationError?this._hidingAnimationError(t,(()=>{t.textContent=""})):t.textContent=""}_removesInvalidClass(e){e.classList.remove("invalid")}_insertsErrorText(e,t){const i=e.nextElementSibling;this._showAnimationError?this._showAnimationError(i,(()=>{i.textContent=t})):i.textContent=t}_required(e){let{element:t,errorMessage:i}=e;const{checked:s}=t;return t.value.trim()||s?{isValid:!0}:{isValid:!1,errorMessage:i}}_maxLength(e){let{element:t,errorMessage:i,value:s}=e;return t.value.trim().length<=s?{isValid:!0}:{isValid:!1,errorMessage:i}}_minLength(e){let{element:t,errorMessage:i,value:s}=e;return t.value.trim().length>=s?{isValid:!0}:{isValid:!1,errorMessage:i}}_text(e){let{element:t,errorMessage:i}=e;const s=t.value.trim();return/[^a-zA-ZА-Яа-я\s]/.test(s)?{isValid:!1,errorMessage:i}:{isValid:!0}}_phone(e){let{element:t,errorMessage:i}=e;const s=t.value.trim();return/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/.test(s)?{isValid:!0}:{isValid:!1,errorMessage:i}}_email(e){let{element:t,errorMessage:i}=e;const s=t.value.trim();return/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(s)?{isValid:!0}:{isValid:!1,errorMessage:i}}}const u={showAnimationError(e,t){t(),e.style.opacity=1},hidingAnimationError(e,t){e.style.opacity=0,setTimeout((()=>{t()}),400)}},m=new n({exception:[".form-status"],mutationObserver:!0,disableOnMobileDevice:!0}),g=new i({container:".form-status",body:".modal__body",focusLock:m});function v(e,t){e.addElementForValidation(t,{required:{errorMessage:"This field is required!"},email:{errorMessage:"Wrong format! Example: example@bk.ru"}})}function b(e,t){e.addElementForValidation(t,{required:{errorMessage:"This field is required!"},text:{errorMessage:"Wrong format! Example: Matthew"}})}function y(e,t){e.addElementForValidation(t,{required:{errorMessage:"This field is required!"},phone:{errorMessage:"Wrong format! Example: +7 923 678 56 70"}})}function f(e,t){e.addElementForValidation(t,{required:{errorMessage:"This field is required!"},text:{errorMessage:"Invalid format, only letters allowed!"}})}function p(e){e.submit((()=>{e.validates();const t=e.isValid();!function(e){document.querySelector(".form-status").dataset.status=e?"success":"error"}(t),t&&e.getForm().reset(),g.open(),setTimeout((()=>{g.isOpen()&&g.close()}),2500)}))}function E(){const e=new c({container:".burger-menu",trigger:".header .burger-trigger",body:".burger-menu__body",breakpoints:{[48*d()]:()=>{e.isOpen()&&e.close()}}});e.init(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if("string"!=typeof e)throw new Error("Selector incorrect");const t=document.querySelectorAll(e);null==t||t.forEach((e=>{e.addEventListener("click",a)}))}(".smooth-scroll"),function(){const e=new _(".feedback-form",u);b(e,"#feedback-name"),y(e,"#feedback-phone"),v(e,"#feedback-email"),f(e,"#feedback-message"),p(e)}(),function(){const e=new _(".newsletter-sub",u);v(e,"#newsletter-sub-email"),p(e)}()}function k(){document.body.insertAdjacentHTML("beforeend",'\n    <div class="modal error-notification">\n      <div class="modal__body error-notification__body">\n        <div class="modal__content error-notification__content">\n          <p class="error-notification__text">Произошла ошибка, перезагрузите страницу!</p>\n          <button class="btn-reset modal__close" type="button">\n            <svg class="modal__icon">\n              <use xlink:href="img/sprite.svg#close"></use>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  ');const e=new n({exception:".error-notification",disableOnMobileDevice:!0});e.init();const t=new i({container:".error-notification",body:"modal__body",focusLock:e});t.init(),setTimeout((()=>{t.open()}))}m.init(),g.init(),function(e){window.addEventListener("error",k);try{(()=>{E();const e=new n({exception:[".subscribe-modal",".cv-modal",".form-status"],mutationObserver:!0,disableOnMobileDevice:!0});e.init(),new i({container:".subscribe-modal",trigger:".available-positions__subscribe",body:".modal__body",focusLock:e}).init(),function(){const e=new _(".subscribe-form",u);b(e,"#subscribe-name"),v(e,"#subscribe-email"),p(e)}(),new i({container:".cv-modal",trigger:".available-positions__cv",body:".modal__body",focusLock:e}).init(),new r(".location-select",{animation:new l}).init(),document.querySelectorAll(".custom-file").forEach((e=>{const t=e.querySelector(".custom-file__input"),i=e.querySelector(".custom-file__text");t.addEventListener("change",(e=>{const{files:t}=e.target,s=t.length;i.textContent=1!=s?`${s} files`:t[0].name}))})),function(){const e=new _(".cv-form",u);b(e,"#cv-name"),y(e,"#cv-phone"),v(e,"#cv-email"),f(e,"#cv-message"),e.addElementForValidation("#cv-file",{required:{errorMessage:"You must attach your cv!"}}),p(e)}()})()}catch(e){k()}}()}();